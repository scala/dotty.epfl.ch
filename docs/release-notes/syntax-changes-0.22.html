<html><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><title>Syntax Changes in Dotty 0.22</title><link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico"></link><script type="text/javascript" src="../../scripts/clipboard.js" defer="true"></script><script type="text/javascript" src="../../scripts/platform-content-handler.js" defer="true"></script><script type="text/javascript" src="../../scripts/main.js" defer="true"></script><link rel="stylesheet" href="../../styles/nord-light.css"></link><link rel="stylesheet" href="../../styles/scalastyle.css"></link><link rel="stylesheet" href="../../styles/dotty-icons.css"></link><link rel="stylesheet" href="../../styles/diagram.css"></link><link rel="stylesheet" href="../../styles/filter-bar.css"></link><link rel="stylesheet" href="../../styles/search-bar.css"></link><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><script type="text/javascript" src="../../scripts/diagram.js" defer="true"></script><link rel="stylesheet" href="../../styles/filter-bar.css"></link><script type="text/javascript" src="../../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../../scripts/data.js" defer="true"></script><script type="text/javascript" src="../../scripts/fast-navigation-loader.js" defer="true"></script><link rel="stylesheet" href="../../css/bootstrap.min.css"></link><link rel="stylesheet" href="../../css/dottydoc.css"></link><link rel="stylesheet" href="../../css/color-brewer.css"></link><script type="text/javascript" src="../../js/jquery.min.js" defer="true"></script><script type="text/javascript" src="../../js/bootstrap.min.js" defer="true"></script><script>var pathToRoot = "../../";</script></head><body><div id="container"><div id="leftColumn"><div id="logo"><span><img src="../../project-logo/logo.svg"></img></span><span><div class="projectName">Scala 3</div></span><span><div class="projectVersion">3.0.0-M3-bin-20201202-11f53c7-NIGHTLY</div></span></div><div id="paneSearch"></div><nav id="sideMenu"></nav></div><div id="main"><div id="leftToggler"><span class="icon-toggler"></span></div><div id="searchBar"></div><main>
  <div id="content" pageIds="_.docs/release-notes/syntax-changes-0.22.md////PointingToDeclaration//-892918555">
    <div class="breadcrumbs"><a href="../index.html">Scala 3</a>/<a href="syntax-changes-0.22.html">Syntax Changes in Dotty 0.22</a></div>
<html>
 <head>
  <link rel="dns-prefetch" href="//fonts.googleapis.com"> 
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"> 
 </head>
 <body>
  <div id="content-wrapper"> 
   <main class="container"> 
    <header> 
     <h1>Syntax Changes in Dotty 0.22</h1> 
     <div class="byline"> <a href="https://github.com/lampepfl/dotty/edit/master/docs/docs/release-notes/syntax-changes-0.22.md#L"> <i class="far fa-edit"></i> Edit this page on GitHub </a> 
     </div> 
    </header> 
    <p>In 2019, we experimented with several syntax changes in Dotty, most notably in the area of implicits replacements. In Dotty 0.22, released on Feb 5, 2020, we have settled on what we believe will be the definite syntax for Scala 3. Dotty 0.23 will support only this syntax. Previous variants will no longer be supported.</p> 
    <p>Here is a rundown of how previous variants need to be rewritten in the new syntax. This will be useful as a migration and learning help for people who have already written code in one of the previous versions of Dotty.</p> 
    <h2><a href="#given-instances" id="given-instances" class="anchor"></a>Given Instances</h2> 
    <p>Given instances are always written with <code>given</code> and <code>as</code>. The previous use of <code>:</code> instead of <code>as</code> is no longer supported. Examples:</p> 
    <pre><code class="language-scala">given intOrd as Ordering[Int] { ... }
given [T] as Ordering[List[T]] { ... }
given ctx as ExecutionContext = ...
given Ordering[String] { ... }
</code></pre> 
    <p><code>as</code> can be omitted if the instance is anonymous and does not have parameters, as in the last definition above.</p> 
    <h2><a href="#context-parameters" id="context-parameters" class="anchor"></a>Context Parameters</h2> 
    <p>Context parameters are the replacement of Scala 2's implicit parameters. Context parameters and arguments both start with <code>using</code>. Examples:</p> 
    <pre><code class="language-scala">def max[T](x: T, y: T)(using Ordering[T]): T = ...
given [T](using Ordering[T]) as Ordering[List[T]] { ... }

max(a, b)(using intOrd)
</code></pre> 
    <p>The previous syntax that uses <code>given</code> also for context parameters and arguments is no longer supported.</p> 
    <p>Context bounds remain supported as a shorthand for one-parameter type class constraints. So the two definitions above could also be written as</p> 
    <pre><code class="language-scala">def max[T: Ordering](x: T, y: T): T = ...
given [T: Ordering] as Ordering[List[T]] { ... }
</code></pre> 
    <p>Parameters of context function values are also written with <code>using</code>. So it is</p> 
    <pre><code class="language-scala">(using x: A) =&gt; E
</code></pre> 
    <p>instead of <code>(implicit x: A) =&gt; E</code> or <code>(given x: A) =&gt; E</code>.</p> 
    <h2><a href="#context-functions-types" id="context-functions-types" class="anchor"></a>Context Functions Types</h2> 
    <p>Implicit function types <code>implicit A =&gt; B</code> have been replaced with context function types, which are written <code>A ?=&gt; B</code>. The syntax <code>(given A) =&gt; B</code> that was used in earlier Dotty versions is no longer supported.</p> 
    <h2><a href="#given-imports" id="given-imports" class="anchor"></a>Given Imports</h2> 
    <p>The syntax of wildcard given import selectors is now <code>given _</code>. Examples</p> 
    <pre><code class="language-scala">import a.{given _}
import b.{_, given _}
</code></pre> 
    <p>The previous syntax, which used just <code>given</code> without an underscore is no longer supported. The change was made to better align with typed given import selectors such as <code>given Ordering[T]</code>, which are unchanged.</p> 
    <h2><a href="#collective-extensions" id="collective-extensions" class="anchor"></a>Collective Extensions</h2> 
    <p>Collective extensions are now a separate construct. Example:</p> 
    <pre><code class="language-scala">extension [T] on List[T] {
  def second: T ...
  def takeRightWhile(p: T =&gt; Boolean): List[T] = ...
}
</code></pre> 
    <p>Collective extensions still <em>expand</em> to given instances with regular extension methods, but the previous syntaxes that expressed them as some syntactic variant of given instances are no longer supported.</p> 
    <h2><a href="#extension-methods" id="extension-methods" class="anchor"></a>Extension Methods</h2> 
    <p>There have been two syntax changes for regular extension methods. First, any type parameters are now written in front, following the <code>def</code>. Second, a "<code>.</code>" in front of the method name is now allowed (but not required). Example:</p> 
    <pre><code class="language-scala">def [T](xs: List[T]).second: T
</code></pre> 
    <p>The previous syntax which used type parameters after the method name is no longer supported.</p> 
    <h2><a href="#optional-braces-for-definitions" id="optional-braces-for-definitions" class="anchor"></a>Optional Braces For Definitions</h2> 
    <p>Braces around the definitions of a class, object or similar construct can now be omitted if the leading signature of the definition is followed by a <code>:</code> at the end a line. Examples:</p> 
    <pre><code class="language-scala">trait Text:
  def toString: String

class Str(str: String) extends Text:
  def toString = str

class Append(txt1: Text, txt2: Text) extends Text:
  def toString = txt1 ++ txt2

object Empty extends Text:
  def toString = ""

extension on (t: Text):
  def length = toString.length

given Ordering[Text]:
  def compare(txt1: Text, txt2: Text): Int =
    summon[Ordering[String]].compare(txt1.toString, txt2.toString)
</code></pre> 
    <p>Previous variants required a <code>with</code> instead of the <code>:</code> or inserted braces around indented code after class, object, ... without any leading token. These are no longer supported.</p> 
    <p>Note that this interpretation of <code>:</code> as an alternative to braces only applies to class-level definitions. The use of <code>:</code> at the end of a line to imply braces around a following <em>function argument</em> is not affected by this change. It still requires the <code>Yindent-colons</code> option.</p> 
   </main> 
  </div> 
  <script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'lampepfl/dotty'
  };
</script> 
  <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
 </body>
</html>  </div>
</main><footer><span class="go-to-top-icon"><a href="#container"><span class="icon-vertical_align_top"></span>&nbsp;Back to top</a></span>Generated by&nbsp;<a href="https://github.com/lampepfl/dotty/tree/master/scala3doc"><img src="../../images/scala3doc_logo.svg" alt="Scala3doc" class="scala3doc_logo"></img></a></footer></div></div><script type="text/javascript" src="../../scripts/pages.js"></script><script type="text/javascript" src="../../scripts/main.js"></script></body></html>
