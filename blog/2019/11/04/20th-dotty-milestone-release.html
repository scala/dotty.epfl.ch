<html><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><title>Announcing Dotty 0.20.0-RC1 – `with` starting indentation blocks, inline given specializations and more</title><link rel="shortcut icon" type="image/x-icon" href="../../../../favicon.ico"></link><script type="text/javascript" src="../../../../scripts/clipboard.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/platform-content-handler.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/main.js" defer="true"></script><link rel="stylesheet" href="../../../../styles/nord-light.css"></link><link rel="stylesheet" href="../../../../styles/scalastyle.css"></link><link rel="stylesheet" href="../../../../styles/dotty-icons.css"></link><link rel="stylesheet" href="../../../../styles/diagram.css"></link><link rel="stylesheet" href="../../../../styles/filter-bar.css"></link><link rel="stylesheet" href="../../../../styles/search-bar.css"></link><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/diagram.js" defer="true"></script><link rel="stylesheet" href="../../../../styles/filter-bar.css"></link><script type="text/javascript" src="../../../../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/data.js" defer="true"></script><script type="text/javascript" src="../../../../scripts/fast-navigation-loader.js" defer="true"></script><link rel="stylesheet" href="../../../../css/bootstrap.min.css"></link><link rel="stylesheet" href="../../../../css/dottydoc.css"></link><link rel="stylesheet" href="../../../../css/color-brewer.css"></link><script type="text/javascript" src="../../../../js/jquery.min.js" defer="true"></script><script type="text/javascript" src="../../../../js/bootstrap.min.js" defer="true"></script><script>var pathToRoot = "../../../../";</script></head><body><div id="container"><div id="leftColumn"><div id="logo"><span><img src="../../../../project-logo/logo.svg"></img></span><span><div class="projectName">Scala 3</div></span><span><div class="projectVersion">3.0.0-M3-bin-20201208-f334e3f-NIGHTLY</div></span></div><div id="paneSearch"></div><nav id="sideMenu"></nav></div><div id="main"><div id="leftToggler"><span class="icon-toggler"></span></div><div id="searchBar"></div><main>
  <div id="content" pageIds="_.blog/_posts/2019-11-04-20th-dotty-milestone-release.md////PointingToDeclaration//-1218499400">
    <div class="breadcrumbs"><a href="../../../../docs/index.html">Scala 3</a>/<a href="../../../index.html">Blog</a>/<a href="20th-dotty-milestone-release.html">Announcing Dotty 0.20.0-RC1 – `with` starting indentation blocks, inline given specializations and more</a></div>
<html>
 <head>
  <link rel="dns-prefetch" href="//fonts.googleapis.com"> 
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"> 
 </head>
 <body>
  <div id="content-wrapper"> 
   <main class="container"> 
    <header> 
     <h1>Announcing Dotty 0.20.0-RC1 – `with` starting indentation blocks, inline given specializations and more</h1> 
     <div class="byline"> <time class="date"> <i class="far fa-calendar-alt"></i> 2019-11-04 </time> <span class="author"> <i class="fas fa-pen-nib"></i> Anatolii Kmetiuk </span> 
     </div> 
    </header> 
    <p>Greetings! We are excited to announce the 20th release of Dotty. This release brings a bunch of improvements to the language, such as <code>with</code> keyword starting an indentation block, normal parameters after given parameters, inline givens specialization and more.</p> 
    <p>This release serves as a technology preview that demonstrates new language features and the compiler supporting them.</p> 
    <p>Dotty is the project name for technologies that are being considered for inclusion in Scala 3. Scala has pioneered the fusion of object-oriented and functional programming in a typed setting. Scala 3 will be a big step towards realising the full potential of these ideas. Its main objectives are to</p> 
    <ul> 
     <li>become more opinionated by promoting programming idioms we found to work well,</li> 
     <li>simplify where possible,</li> 
     <li>eliminate inconsistencies and surprising behaviours,</li> 
     <li>build on strong foundations to ensure the design hangs together well,</li> 
     <li>consolidate language constructs to improve the language’s consistency, safety, ergonomics, and performance.</li> 
    </ul> 
    <p>You can learn more about Dotty on our <a href="https://dotty.epfl.ch">website</a>.</p> <!--more--> 
    <h1><a href="#whats-new-in-the-0200-rc1-technology-preview" id="whats-new-in-the-0200-rc1-technology-preview" class="anchor"></a>What’s new in the 0.20.0-RC1 technology preview?</h1> 
    <h2><a href="#syntax-change-for-type-parameters-of-extension-methods" id="syntax-change-for-type-parameters-of-extension-methods" class="anchor"></a>Syntax change for type parameters of extension methods</h2> 
    <p>When writing extension methods with type parameters, the type parameters must come first, e.g.:</p> 
    <pre><code class="language-scala">def [T](xs: List[T]) append (ys: List[T]): List[T] = ...
</code></pre> 
    <p>Previously, the same would have been written as:</p> 
    <pre><code class="language-scala">def (xs: List[T]) append [T] (ys: List[T]): List[T] = ...
</code></pre> 
    <p>An argument for the old syntax is that it aligns the definition and call syntax. On the other hand, the new syntax maintains the general rule that parameter introductions always come before parameter uses. The decisive argument to switch is to be consistent with the new collective parameter syntax, where <code>append</code> would be written like this:</p> 
    <pre><code class="language-scala">given [T](xs: List[T])
  def append (ys: List[T]): List[T] = ...
</code></pre> 
    <p>To avoid misalignment of type parameters between definition and call syntax, we considered disallowing explicit type parameters for extension methods altogether, and to require that the method is called as a normal method instead. But that would not work for anonymous givens as in the last example above.</p> 
    <h2><a href="#infer-privatethis" id="infer-privatethis" class="anchor"></a>Infer <code>private[this]</code></h2> 
    <p>We now infer the <code>private[this]</code> modifier for variables if all the accesses to a variable are via this. Explicit <code>private[this]</code> and <code>protected[this]</code> in code are deprecated under the <code>-strict</code> flag.</p> 
    <p>The main reasons for dropping <code>private[this]</code> are:</p> 
    <ul> 
     <li>It is syntactically an irregular case. A pair of brackets usually encloses a type, but <code>this</code> is a value.</li> 
     <li>Its effect over <code>private</code> is purely local and can be easily inferred.</li> 
     <li>It leads to bike shedding: should I use <code>private</code> or <code>private[this]</code>? One is shorter but the other might be more efficient.</li> 
    </ul> 
    <p><code>protected[this]</code> by now influences compiler decisions in no way at all. Hence it is reasonable to drop it.</p> 
    <h2><a href="#with-keywords-new-role" id="with-keywords-new-role" class="anchor"></a><code>with</code> keyword's new role</h2> 
    <p><code>with</code> keyword can now optionally precede the class body. So that you can write your classes as follows:</p> 
    <pre><code class="language-scala">trait A with {
  def f: Int
}
class C(x: Int) extends A with {
  def f = x
}
type T = A with {
  def f: Int
}
</code></pre> 
    <p>Or, equivalently:</p> 
    <pre><code class="language-scala">trait A with
  def f: Int
class C(x: Int) extends A with
  def f = x
type T = A with
  def f: Int
</code></pre> 
    <p>The problem this change solves is that it is very easy to accidentally outdent a class member – and it will end up outside the class. The benefit of the new <code>with</code> is that starts an indentation block. Since the compiler knows for sure an indentation block must follow, it will emit an error if you forget to indent your statement.</p> 
    <h2><a href="#inline-given-specialization" id="inline-given-specialization" class="anchor"></a>Inline <code>given</code> specialization</h2> 
    <p>It is now possible to specialize <code>inline given</code>s with the help of <code>&lt;:</code> as follows:</p> 
    <pre><code class="language-scala">trait A
class B extends A

inline given tc &lt;: A = B()

val x: B = summon[A]
</code></pre> 
    <p>This change brings <code>given</code>s even with the ordinary <code>inline def</code>s.</p> 
    <h2><a href="#normal-parameters-can-follow-given-parameters" id="normal-parameters-can-follow-given-parameters" class="anchor"></a>Normal parameters can follow <code>given</code> parameters</h2> 
    <p>Previously normal parameters after <code>given</code> parameter was disallowed mainly because they looked awkward with the old syntax. With the syntax being improved, this restriction is now lifted and you can write, e.g., the following program:</p> 
    <pre><code class="language-scala">class C(val x: Int)
def f(x: Int)(given c: C)(y: Int) = x + c.x + y
</code></pre> 
    <h2><a href="#then-is-optional-at-line-end" id="then-is-optional-at-line-end" class="anchor"></a><code>then</code> is optional at line end</h2> 
    <p>So the following is now legal:</p> 
    <pre><code class="language-scala">val y1 =
  if x &gt; 0
    1
  else
    2
</code></pre> 
    <p>It is easy to forget to put <code>then</code> at the end of the line if nothing else follows it, but also easy to infer that it must be inserted there.</p> 
    <h2><a href="#metaprogramming-progress" id="metaprogramming-progress" class="anchor"></a>Metaprogramming Progress</h2> 
    <p>We are making a steady progress developing and improving the metaprogramming features of Dotty. Here are metaprogramming highlights of this release:</p> 
    <ul> 
     <li>Fix #7189: Do not try to load contents if file does not exist <a href="https://github.com/lampepfl/dotty/pull/7476">#7476</a></li> 
     <li>Add customizable names for definitions in quotes <a href="https://github.com/lampepfl/dotty/pull/7346">#7346</a></li> 
     <li>Rename scala.quoted.matching.{Bind =&gt; Sym} <a href="https://github.com/lampepfl/dotty/pull/7332">#7332</a></li> 
     <li>Replace AsFunction implicit class with Expr.reduce <a href="https://github.com/lampepfl/dotty/pull/7299">#7299</a></li> 
    </ul> 
    <h1><a href="#let-us-know-what-you-think" id="let-us-know-what-you-think" class="anchor"></a>Let us know what you think!</h1> 
    <p>If you have questions or any sort of feedback, feel free to send us a message on our <a href="https://gitter.im/lampepfl/dotty">Gitter channel</a>. If you encounter a bug, please <a href="https://github.com/lampepfl/dotty/issues/new">open an issue on GitHub</a>.</p> 
    <h2><a href="#contributing" id="contributing" class="anchor"></a>Contributing</h2> 
    <p>Thank you to all the contributors who made this release possible!</p> 
    <p>According to <code>git shortlog -sn --no-merges 0.19.0-RC1..0.20.0-RC1</code> these are:</p> 
    <pre><code>    99  Martin Odersky
    64  Nicolas Stucki
    16  Nikita Eshkeev
    15  Guillaume Martres
     9  Robert Stoll
     8  Anatolii
     5  Liu Fengyun
     5  Olivier Blanvillain
     3  Miles Sabin
     2  Aggelos Biboudis
     2  Jamie Thompson
     2  Antoine Brunner
     2  Ben Elliott
     2  Guillaume R
     1  noti0na1
     1  Ashwin Bhaskar
     1  Batanick
     1  Bojan Dunaj
     1  Harpreet Singh
     1  Lucas
     1  Lucas Jenß
     1  Martijn Hoekstra
     1  bishabosha
     1  brunnerant
</code></pre> 
    <p>If you want to get your hands dirty and contribute to Dotty, now is a good time to get involved! Head to our <a href="https://dotty.epfl.ch/docs/contributing/getting-started.html">Getting Started page for new contributors</a>, and have a look at some of the <a href="https://github.com/lampepfl/dotty/issues?q=is%3Aissue+is%3Aopen+label%3Aexp%3Anovice">good first issues</a>. They make perfect entry points into hacking on the compiler.</p> 
    <p>We are looking forward to having you join the team of contributors.</p> 
    <h2><a href="#library-authors-join-our-community-build" id="library-authors-join-our-community-build" class="anchor"></a>Library authors: Join our community build</h2> 
    <p>Dotty now has a set of widely-used community libraries that are built against every nightly Dotty snapshot. Currently, this includes ScalaPB, algebra, scalatest, scopt and squants. Join our <a href="https://github.com/lampepfl/dotty-community-build">community build</a> to make sure that our regression suite includes your library.</p> 
    <hr> 
    <footer> 
     <img id="author-img" src="images/anatolii.png"> <span id="author-signature"> Anatolii Kmetiuk </span> 
    </footer> 
   </main> 
  </div> 
  <script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'lampepfl/dotty'
  };
</script> 
  <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
 </body>
</html>  </div>
</main><footer><span class="go-to-top-icon"><a href="#container"><span class="icon-vertical_align_top"></span>&nbsp;Back to top</a></span>Generated by&nbsp;<a href="https://github.com/lampepfl/dotty/tree/master/scala3doc"><img src="../../../../images/scala3doc_logo.svg" alt="Scala3doc" class="scala3doc_logo"></img></a></footer></div></div><script type="text/javascript" src="../../../../scripts/pages.js"></script><script type="text/javascript" src="../../../../scripts/main.js"></script></body></html>
